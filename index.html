<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameHub Pro | Premium Market</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FFD700; --bg-dark: #0e0e0e; --card-dark: #1a1a1a;
            --text-dark: #ffffff; --accent: #2ecc71; --danger: #ff4757;
        }

        body {
            margin: 0; font-family: 'Cairo', sans-serif;
            background: var(--bg-dark); color: var(--text-dark);
            transition: 0.3s; padding-bottom: 80px;
        }

        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 20px; background: #000; position: sticky; top: 0; z-index: 1000;
        }

        .search-area { flex: 1; margin: 0 15px; }
        .search-area input {
            width: 100%; padding: 10px; border-radius: 25px; border: 1px solid #333;
            background: #222; color: white; outline: none;
        }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± */
        .slider-container {
            position: relative; width: 100%; height: 220px; overflow: hidden;
        }
        .slides {
            display: flex; transition: transform 0.5s ease-in-out; width: 100%; height: 100%;
        }
        .slides img {
            width: 100%; min-width: 100%; height: 100%; object-fit: cover;
        }
        .slider-nav {
            position: absolute; bottom: 10px; width: 100%; display: flex; justify-content: center; gap: 5px;
        }
        .dot { width: 8px; height: 8px; background: rgba(255,255,255,0.5); border-radius: 50%; }
        .dot.active { background: var(--primary); }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
        .card { background: var(--card-dark); border-radius: 18px; overflow: hidden; margin-bottom: 20px; position: relative; border: 1px solid #222; }
        .fav-btn { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.6); border: none; border-radius: 50%; padding: 8px; cursor: pointer; color: white; z-index: 10; }
        .card-body { padding: 15px; }

        /* Ø§Ù„ØªÙ‚ÙŠÙŠÙ… */
        .rating { color: var(--primary); font-size: 14px; margin-bottom: 5px; }

        .section { display: none; padding: 15px; max-width: 600px; margin: auto; }
        .active { display: block; animation: fadeIn 0.4s; }

        .btn-main { background: var(--primary); color: #000; padding: 12px; border: none; border-radius: 10px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); padding: 8px 15px; border-radius: 20px; cursor: pointer; white-space: nowrap; }

        .nav { position: fixed; bottom: 0; width: 100%; display: flex; justify-content: space-around; background: rgba(0,0,0,0.95); padding: 15px 0; border-top: 1px solid #222; z-index: 1000; }
        .nav button { background: none; border: none; font-size: 22px; color: #666; cursor: pointer; }
        .nav button.active-link { color: var(--primary); }

        .filters-scroll { display: flex; gap: 10px; overflow-x: auto; padding: 10px; scrollbar-width: none; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body onload="init()">

<header>
    <div onclick="showPage('escrow')" style="cursor:pointer; font-size: 22px;">ğŸ›¡ï¸</div>
    <div class="search-area">
        <input type="text" id="searchInput" onkeyup="filterPosts()" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³ÙƒÙŠÙ†Ø§Øª Ø£Ùˆ Ø§Ù„Ø³Ø¹Ø±...">
    </div>
    <div onclick="showPage('settings')" style="cursor:pointer; font-size: 22px;">âš™ï¸</div>
</header>

<div class="filters-scroll">
    <button class="btn-outline" onclick="renderPosts(posts, 'postsList')">Ø§Ù„ÙƒÙ„</button>
    <button class="btn-outline" onclick="filterPrice(0, 100)">ØªØ­Øª 100 DT</button>
    <button class="btn-outline" onclick="filterGame('Ø¨Ø¨Ø¬ÙŠ')">Ø¨Ø¨Ø¬ÙŠ</button>
    <button class="btn-outline" onclick="filterGame('ÙØ±ÙŠ ÙØ§ÙŠØ±')">ÙØ±ÙŠ ÙØ§ÙŠØ±</button>
</div>

<div id="home" class="section active">
    <div id="postsList"></div>
</div>

<div id="favorites" class="section">
    <h2>Ù…ÙØ¶Ù„ØªÙŠ â¤ï¸</h2>
    <div id="favList"></div>
</div>

<div id="escrow" class="section">
    <h2>Ø§Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ø¢Ù…Ù† ğŸ›¡ï¸</h2>
    <div style="background:#1a1a1a; padding:20px; border-radius:15px; border-right: 4px solid var(--primary);">
        <h3>Ø¶Ù…Ø§Ù† Ø§Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø´Ø±Ø§Ø¡</h3>
        <p>Ù„Ø§ ØªÙ‚Ù… Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¥Ù„Ø§ Ø¹Ø¨Ø± ÙˆØ³ÙŠØ·Ù†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„.</p>
        <button class="btn-main">Ø§ØªØµÙ„ Ø¨Ø§Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div id="settings" class="section">
    <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
    <button class="btn-main" style="background:#333; color:white">ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©</button>
    <button class="btn-main" style="background:var(--danger); color:white; margin-top:20px;" onclick="localStorage.clear(); location.reload();">Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>

<div class="nav">
    <button onclick="showPage('home', this)" class="active-link">ğŸ </button>
    <button onclick="showPage('favorites', this)">â¤ï¸</button>
    <button onclick="alert('Ø®Ø§ØµÙŠØ© Ø§Ù„Ù†Ø´Ø± Ø³ØªØªÙˆÙØ± ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¯Ù…')">â•</button>
    <button onclick="showPage('escrow', this)">ğŸ›¡ï¸</button>
</div>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ø¹ Ù…ØµÙÙˆÙØ© ØµÙˆØ± Ù„Ù„Ø³Ù„Ø§ÙŠØ¯Ø±
const posts = [
    { 
        id: 1, game: 'Ø¨Ø¨Ø¬ÙŠ', price: 150, rating: 4.8, 
        imgs: ['https://images.unsplash.com/photo-1542751371-adc38448a05e?w=500', 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=500'],
        desc: 'Ø­Ø³Ø§Ø¨ Ù…Ø´Ø­ÙˆÙ† 7 Ù…ÙˆØ§Ø³Ù…ØŒ Ø¥Ù… ÙÙˆØ± Ø«Ù„Ø¬ÙŠ.'
    },
    { 
        id: 2, game: 'ÙØ±ÙŠ ÙØ§ÙŠØ±', price: 80, rating: 4.2, 
        imgs: ['https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=500', 'https://images.unsplash.com/photo-1580234811497-9bd7fd2f357d?w=500'],
        desc: 'Ø­Ø³Ø§Ø¨ Ù‚Ø¯ÙŠÙ… Ø¬Ø¯Ø§Ù‹ØŒ Ø³ÙƒÙ†Ø§Øª Ø§Ù„ÙØ§ÙŠØ± Ø¨Ø§Ø³ Ø§Ù„Ø£ÙˆÙ„.'
    }
];

let favorites = JSON.parse(localStorage.getItem('favs') || "[]");

function init() {
    renderPosts(posts, 'postsList');
}

function renderPosts(data, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = data.length ? '' : '<p style="text-align:center">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</p>';
    
    data.forEach(p => {
        const isFav = favorites.includes(p.id) ? 'â¤ï¸' : 'ğŸ¤';
        const stars = 'â­'.repeat(Math.floor(p.rating)) + ` (${p.rating})`;
        
        container.innerHTML += `
            <div class="card">
                <button class="fav-btn" onclick="toggleFav(${p.id})">${isFav}</button>
                
                <div class="slider-container" id="slider-${p.id}">
                    <div class="slides">
                        ${p.imgs.map(img => `<img src="${img}">`).join('')}
                    </div>
                    <div class="slider-nav">
                        ${p.imgs.map((_, i) => `<div class="dot ${i===0?'active':''}"></div>`).join('')}
                    </div>
                </div>

                <div class="card-body">
                    <div class="rating">${stars}</div>
                    <div style="display:flex; justify-content:space-between; align-items:center">
                        <h3 style="margin:0">${p.game}</h3>
                        <span style="color:var(--accent); font-weight:bold; font-size:1.2rem">${p.price} DT</span>
                    </div>
                    <p style="color:#ccc; font-size:14px; margin:10px 0">${p.desc}</p>
                    <button class="btn-main" onclick="contactSeller()">ğŸ’¬ Ø´Ø±Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ³ÙŠØ·</button>
                </div>
            </div>
        `;
    });
    startSliders();
}

// ØªØ´ØºÙŠÙ„ ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
function startSliders() {
    posts.forEach(p => {
        const slider = document.querySelector(`#slider-${p.id} .slides`);
        const dots = document.querySelectorAll(`#slider-${p.id} .dot`);
        let current = 0;
        
        setInterval(() => {
            current = (current + 1) % p.imgs.length;
            slider.style.transform = `translateX(${current * 100}%)`; // Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ù€ RTL
            dots.forEach((d, i) => d.classList.toggle('active', i === current));
        }, 3000);
    });
}

function toggleFav(id) {
    favorites = favorites.includes(id) ? favorites.filter(f => f !== id) : [...favorites, id];
    localStorage.setItem('favs', JSON.stringify(favorites));
    renderPosts(posts, 'postsList');
    renderFavorites();
}

function renderFavorites() {
    const favData = posts.filter(p => favorites.includes(p.id));
    renderPosts(favData, 'favList');
}

function filterPrice(min, max) {
    renderPosts(posts.filter(p => p.price >= min && p.price <= max), 'postsList');
}

function filterGame(name) {
    renderPosts(posts.filter(p => p.game === name), 'postsList');
}

function showPage(id, btn) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    if(btn) {
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active-link'));
        btn.classList.add('active-link');
    }
}

function contactSeller() {
    alert("Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„ØºØ±ÙØ© Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø£Ù…Ø§Ù†.");
}
</script>
</body>
</html>
